{"ast":null,"code":"var Normalizer, Quill, Tooltip, dom, _;\nQuill = require('../quill');\nNormalizer = require('../lib/normalizer');\n_ = Quill.require('lodash');\ndom = Quill.require('dom');\nTooltip = function () {\n  Tooltip.DEFAULTS = {\n    offset: 10,\n    styles: {\n      '.tooltip': {\n        'background-color': '#fff',\n        'border': '1px solid #000',\n        'top': '0px',\n        'white-space': 'nowrap',\n        'z-index': '2000'\n      },\n      '.tooltip a': {\n        'cursor': 'pointer',\n        'text-decoration': 'none'\n      }\n    },\n    template: ''\n  };\n  Tooltip.HIDE_MARGIN = '-10000px';\n  function Tooltip(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.quill.addStyles(this.options.styles);\n    this.container = this.quill.addContainer('tooltip');\n    this.container.innerHTML = Normalizer.stripWhitespace(this.options.template);\n    this.container.style.position = 'absolute';\n    dom(this.quill.root).on('focus', _.bind(this.hide, this));\n    this.hide();\n    this.quill.on(this.quill.constructor.events.TEXT_CHANGE, function (_this) {\n      return function (delta, source) {\n        if (source === 'user' && _this.container.style.left !== Tooltip.HIDE_MARGIN) {\n          _this.range = null;\n          return _this.hide();\n        }\n      };\n    }(this));\n  }\n  Tooltip.prototype.initTextbox = function (textbox, enterCallback, escapeCallback) {\n    return dom(textbox).on('keyup', function (_this) {\n      return function (event) {\n        switch (event.which) {\n          case dom.KEYS.ENTER:\n            return enterCallback.call(_this);\n          case dom.KEYS.ESCAPE:\n            return escapeCallback.call(_this);\n          default:\n            return true;\n        }\n      };\n    }(this));\n  };\n  Tooltip.prototype.hide = function () {\n    this.container.style.left = Tooltip.HIDE_MARGIN;\n    if (this.range) {\n      this.quill.setSelection(this.range);\n    }\n    return this.range = null;\n  };\n  Tooltip.prototype.show = function (reference) {\n    var left, top, win, _ref, _ref1;\n    this.range = this.quill.getSelection();\n    _ref = this._position(reference), left = _ref[0], top = _ref[1];\n    _ref1 = this._limit(left, top), left = _ref1[0], top = _ref1[1];\n    win = dom(this.quill.root).window();\n    left += win.pageXOffset;\n    top += win.pageYOffset;\n    this.container.style.left = \"\" + left + \"px\";\n    this.container.style.top = \"\" + top + \"px\";\n    return this.container.focus();\n  };\n  Tooltip.prototype._getBounds = function () {\n    var bounds, scrollX, scrollY, win;\n    bounds = this.quill.root.getBoundingClientRect();\n    win = dom(this.quill.root).window();\n    scrollX = win.pageXOffset;\n    scrollY = win.pageYOffset;\n    return {\n      left: bounds.left + scrollX,\n      right: bounds.right + scrollX,\n      top: bounds.top + scrollY,\n      bottom: bounds.bottom + scrollY,\n      width: bounds.width,\n      height: bounds.height\n    };\n  };\n  Tooltip.prototype._limit = function (left, top) {\n    var editorRect, toolbarRect;\n    editorRect = this._getBounds();\n    toolbarRect = this.container.getBoundingClientRect();\n    left = Math.min(editorRect.right - toolbarRect.width, left);\n    left = Math.max(editorRect.left, left);\n    top = Math.min(editorRect.bottom - toolbarRect.height, top);\n    top = Math.max(editorRect.top, top);\n    return [left, top];\n  };\n  Tooltip.prototype._position = function (reference) {\n    var editorRect, left, referenceBounds, toolbarRect, top;\n    toolbarRect = this.container.getBoundingClientRect();\n    editorRect = this._getBounds();\n    if (reference != null) {\n      referenceBounds = reference.getBoundingClientRect();\n      left = referenceBounds.left + referenceBounds.width / 2 - toolbarRect.width / 2;\n      top = referenceBounds.top + referenceBounds.height + this.options.offset;\n      if (top + toolbarRect.height > editorRect.bottom) {\n        top = referenceBounds.top - toolbarRect.height - this.options.offset;\n      }\n    } else {\n      left = editorRect.left + editorRect.width / 2 - toolbarRect.width / 2;\n      top = editorRect.top + editorRect.height / 2 - toolbarRect.height / 2;\n    }\n    return [left, top];\n  };\n  return Tooltip;\n}();\nQuill.registerModule('tooltip', Tooltip);\nmodule.exports = Tooltip;","map":{"version":3,"names":["Normalizer","Quill","Tooltip","dom","_","require","DEFAULTS","offset","styles","template","HIDE_MARGIN","quill","options","addStyles","container","addContainer","innerHTML","stripWhitespace","style","position","root","on","bind","hide","constructor","events","TEXT_CHANGE","_this","delta","source","left","range","prototype","initTextbox","textbox","enterCallback","escapeCallback","event","which","KEYS","ENTER","call","ESCAPE","setSelection","show","reference","top","win","_ref","_ref1","getSelection","_position","_limit","window","pageXOffset","pageYOffset","focus","_getBounds","bounds","scrollX","scrollY","getBoundingClientRect","right","bottom","width","height","editorRect","toolbarRect","Math","min","max","referenceBounds","registerModule","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/modules/tooltip.js"],"sourcesContent":["var Normalizer, Quill, Tooltip, dom, _;\n\nQuill = require('../quill');\n\nNormalizer = require('../lib/normalizer');\n\n_ = Quill.require('lodash');\n\ndom = Quill.require('dom');\n\nTooltip = (function() {\n  Tooltip.DEFAULTS = {\n    offset: 10,\n    styles: {\n      '.tooltip': {\n        'background-color': '#fff',\n        'border': '1px solid #000',\n        'top': '0px',\n        'white-space': 'nowrap',\n        'z-index': '2000'\n      },\n      '.tooltip a': {\n        'cursor': 'pointer',\n        'text-decoration': 'none'\n      }\n    },\n    template: ''\n  };\n\n  Tooltip.HIDE_MARGIN = '-10000px';\n\n  function Tooltip(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.quill.addStyles(this.options.styles);\n    this.container = this.quill.addContainer('tooltip');\n    this.container.innerHTML = Normalizer.stripWhitespace(this.options.template);\n    this.container.style.position = 'absolute';\n    dom(this.quill.root).on('focus', _.bind(this.hide, this));\n    this.hide();\n    this.quill.on(this.quill.constructor.events.TEXT_CHANGE, (function(_this) {\n      return function(delta, source) {\n        if (source === 'user' && _this.container.style.left !== Tooltip.HIDE_MARGIN) {\n          _this.range = null;\n          return _this.hide();\n        }\n      };\n    })(this));\n  }\n\n  Tooltip.prototype.initTextbox = function(textbox, enterCallback, escapeCallback) {\n    return dom(textbox).on('keyup', (function(_this) {\n      return function(event) {\n        switch (event.which) {\n          case dom.KEYS.ENTER:\n            return enterCallback.call(_this);\n          case dom.KEYS.ESCAPE:\n            return escapeCallback.call(_this);\n          default:\n            return true;\n        }\n      };\n    })(this));\n  };\n\n  Tooltip.prototype.hide = function() {\n    this.container.style.left = Tooltip.HIDE_MARGIN;\n    if (this.range) {\n      this.quill.setSelection(this.range);\n    }\n    return this.range = null;\n  };\n\n  Tooltip.prototype.show = function(reference) {\n    var left, top, win, _ref, _ref1;\n    this.range = this.quill.getSelection();\n    _ref = this._position(reference), left = _ref[0], top = _ref[1];\n    _ref1 = this._limit(left, top), left = _ref1[0], top = _ref1[1];\n    win = dom(this.quill.root).window();\n    left += win.pageXOffset;\n    top += win.pageYOffset;\n    this.container.style.left = \"\" + left + \"px\";\n    this.container.style.top = \"\" + top + \"px\";\n    return this.container.focus();\n  };\n\n  Tooltip.prototype._getBounds = function() {\n    var bounds, scrollX, scrollY, win;\n    bounds = this.quill.root.getBoundingClientRect();\n    win = dom(this.quill.root).window();\n    scrollX = win.pageXOffset;\n    scrollY = win.pageYOffset;\n    return {\n      left: bounds.left + scrollX,\n      right: bounds.right + scrollX,\n      top: bounds.top + scrollY,\n      bottom: bounds.bottom + scrollY,\n      width: bounds.width,\n      height: bounds.height\n    };\n  };\n\n  Tooltip.prototype._limit = function(left, top) {\n    var editorRect, toolbarRect;\n    editorRect = this._getBounds();\n    toolbarRect = this.container.getBoundingClientRect();\n    left = Math.min(editorRect.right - toolbarRect.width, left);\n    left = Math.max(editorRect.left, left);\n    top = Math.min(editorRect.bottom - toolbarRect.height, top);\n    top = Math.max(editorRect.top, top);\n    return [left, top];\n  };\n\n  Tooltip.prototype._position = function(reference) {\n    var editorRect, left, referenceBounds, toolbarRect, top;\n    toolbarRect = this.container.getBoundingClientRect();\n    editorRect = this._getBounds();\n    if (reference != null) {\n      referenceBounds = reference.getBoundingClientRect();\n      left = referenceBounds.left + referenceBounds.width / 2 - toolbarRect.width / 2;\n      top = referenceBounds.top + referenceBounds.height + this.options.offset;\n      if (top + toolbarRect.height > editorRect.bottom) {\n        top = referenceBounds.top - toolbarRect.height - this.options.offset;\n      }\n    } else {\n      left = editorRect.left + editorRect.width / 2 - toolbarRect.width / 2;\n      top = editorRect.top + editorRect.height / 2 - toolbarRect.height / 2;\n    }\n    return [left, top];\n  };\n\n  return Tooltip;\n\n})();\n\nQuill.registerModule('tooltip', Tooltip);\n\nmodule.exports = Tooltip;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
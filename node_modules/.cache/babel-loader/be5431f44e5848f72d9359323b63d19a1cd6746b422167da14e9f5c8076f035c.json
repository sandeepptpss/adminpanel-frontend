{"ast":null,"code":"var Delta,\n  ImageTooltip,\n  Quill,\n  Tooltip,\n  dom,\n  _,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function (child, parent) {\n    for (var key in parent) {\n      if (__hasProp.call(parent, key)) child[key] = parent[key];\n    }\n    function ctor() {\n      this.constructor = child;\n    }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  };\nQuill = require('../quill');\nTooltip = require('./tooltip');\n_ = Quill.require('lodash');\ndom = Quill.require('dom');\nDelta = Quill.require('delta');\nImageTooltip = function (_super) {\n  __extends(ImageTooltip, _super);\n  ImageTooltip.DEFAULTS = {\n    styles: {\n      '.image-tooltip-container': {\n        'margin': '25px',\n        'padding': '10px',\n        'width': '300px'\n      },\n      '.image-tooltip-container:after': {\n        'clear': 'both',\n        'content': '\"\"',\n        'display': 'table'\n      },\n      '.image-tooltip-container .preview': {\n        'margin': '10px 0px',\n        'position': 'relative',\n        'border': '1px dashed #000',\n        'height': '200px'\n      },\n      '.image-tooltip-container .preview span': {\n        'display': 'inline-block',\n        'position': 'absolute',\n        'text-align': 'center',\n        'top': '40%',\n        'width': '100%'\n      },\n      '.image-tooltip-container img': {\n        'bottom': '0',\n        'left': '0',\n        'margin': 'auto',\n        'max-height': '100%',\n        'max-width': '100%',\n        'position': 'absolute',\n        'right': '0',\n        'top': '0'\n      },\n      '.image-tooltip-container .input': {\n        'box-sizing': 'border-box',\n        'width': '100%'\n      },\n      '.image-tooltip-container a': {\n        'border': '1px solid black',\n        'box-sizing': 'border-box',\n        'display': 'inline-block',\n        'float': 'left',\n        'padding': '5px',\n        'text-align': 'center',\n        'width': '50%'\n      }\n    },\n    template: '<input class=\"input\" type=\"textbox\"> <div class=\"preview\"> <span>Preview</span> </div> <a href=\"javascript:;\" class=\"cancel\">Cancel</a> <a href=\"javascript:;\" class=\"insert\">Insert</a>'\n  };\n  function ImageTooltip(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.options.styles = _.defaults(this.options.styles, Tooltip.DEFAULTS.styles);\n    this.options = _.defaults(this.options, Tooltip.DEFAULTS);\n    ImageTooltip.__super__.constructor.call(this, this.quill, this.options);\n    this.preview = this.container.querySelector('.preview');\n    this.textbox = this.container.querySelector('.input');\n    dom(this.container).addClass('image-tooltip-container');\n    this.initListeners();\n  }\n  ImageTooltip.prototype.initListeners = function () {\n    dom(this.container.querySelector('.insert')).on('click', _.bind(this.insertImage, this));\n    dom(this.container.querySelector('.cancel')).on('click', _.bind(this.hide, this));\n    dom(this.textbox).on('input', _.bind(this._preview, this));\n    this.initTextbox(this.textbox, this.insertImage, this.hide);\n    return this.quill.onModuleLoad('toolbar', function (_this) {\n      return function (toolbar) {\n        return toolbar.initFormat('image', _.bind(_this._onToolbar, _this));\n      };\n    }(this));\n  };\n  ImageTooltip.prototype.insertImage = function () {\n    var index, url;\n    url = this._normalizeURL(this.textbox.value);\n    if (this.range == null) {\n      this.range = new Range(0, 0);\n    }\n    if (this.range) {\n      this.preview.innerHTML = '<span>Preview</span>';\n      this.textbox.value = '';\n      index = this.range.end;\n      this.quill.insertEmbed(index, 'image', url, 'user');\n      this.quill.setSelection(index + 1, index + 1);\n    }\n    return this.hide();\n  };\n  ImageTooltip.prototype._onToolbar = function (range, value) {\n    if (value) {\n      if (!this.textbox.value) {\n        this.textbox.value = 'http://';\n      }\n      this.show();\n      this.textbox.focus();\n      return _.defer(function (_this) {\n        return function () {\n          return _this.textbox.setSelectionRange(_this.textbox.value.length, _this.textbox.value.length);\n        };\n      }(this));\n    } else {\n      return this.quill.deleteText(range, 'user');\n    }\n  };\n  ImageTooltip.prototype._preview = function () {\n    var img;\n    if (!this._matchImageURL(this.textbox.value)) {\n      return;\n    }\n    if (this.preview.firstChild.tagName === 'IMG') {\n      return this.preview.firstChild.setAttribute('src', this.textbox.value);\n    } else {\n      img = this.preview.ownerDocument.createElement('img');\n      img.setAttribute('src', this.textbox.value);\n      return this.preview.replaceChild(img, this.preview.firstChild);\n    }\n  };\n  ImageTooltip.prototype._matchImageURL = function (url) {\n    return /^https?:\\/\\/.+\\.(jp?g|gif|png)$/.test(url);\n  };\n  ImageTooltip.prototype._normalizeURL = function (url) {\n    if (!/^https?:\\/\\//.test(url)) {\n      url = 'http://' + url;\n    }\n    return url;\n  };\n  return ImageTooltip;\n}(Tooltip);\nQuill.registerModule('image-tooltip', ImageTooltip);\nmodule.exports = ImageTooltip;","map":{"version":3,"names":["Delta","ImageTooltip","Quill","Tooltip","dom","_","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","require","_super","DEFAULTS","styles","template","quill","options","defaults","preview","container","querySelector","textbox","addClass","initListeners","on","bind","insertImage","hide","_preview","initTextbox","onModuleLoad","_this","toolbar","initFormat","_onToolbar","index","url","_normalizeURL","value","range","Range","innerHTML","end","insertEmbed","setSelection","show","focus","defer","setSelectionRange","length","deleteText","img","_matchImageURL","firstChild","tagName","setAttribute","ownerDocument","createElement","replaceChild","test","registerModule","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/modules/image-tooltip.js"],"sourcesContent":["var Delta, ImageTooltip, Quill, Tooltip, dom, _,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nQuill = require('../quill');\n\nTooltip = require('./tooltip');\n\n_ = Quill.require('lodash');\n\ndom = Quill.require('dom');\n\nDelta = Quill.require('delta');\n\nImageTooltip = (function(_super) {\n  __extends(ImageTooltip, _super);\n\n  ImageTooltip.DEFAULTS = {\n    styles: {\n      '.image-tooltip-container': {\n        'margin': '25px',\n        'padding': '10px',\n        'width': '300px'\n      },\n      '.image-tooltip-container:after': {\n        'clear': 'both',\n        'content': '\"\"',\n        'display': 'table'\n      },\n      '.image-tooltip-container .preview': {\n        'margin': '10px 0px',\n        'position': 'relative',\n        'border': '1px dashed #000',\n        'height': '200px'\n      },\n      '.image-tooltip-container .preview span': {\n        'display': 'inline-block',\n        'position': 'absolute',\n        'text-align': 'center',\n        'top': '40%',\n        'width': '100%'\n      },\n      '.image-tooltip-container img': {\n        'bottom': '0',\n        'left': '0',\n        'margin': 'auto',\n        'max-height': '100%',\n        'max-width': '100%',\n        'position': 'absolute',\n        'right': '0',\n        'top': '0'\n      },\n      '.image-tooltip-container .input': {\n        'box-sizing': 'border-box',\n        'width': '100%'\n      },\n      '.image-tooltip-container a': {\n        'border': '1px solid black',\n        'box-sizing': 'border-box',\n        'display': 'inline-block',\n        'float': 'left',\n        'padding': '5px',\n        'text-align': 'center',\n        'width': '50%'\n      }\n    },\n    template: '<input class=\"input\" type=\"textbox\"> <div class=\"preview\"> <span>Preview</span> </div> <a href=\"javascript:;\" class=\"cancel\">Cancel</a> <a href=\"javascript:;\" class=\"insert\">Insert</a>'\n  };\n\n  function ImageTooltip(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.options.styles = _.defaults(this.options.styles, Tooltip.DEFAULTS.styles);\n    this.options = _.defaults(this.options, Tooltip.DEFAULTS);\n    ImageTooltip.__super__.constructor.call(this, this.quill, this.options);\n    this.preview = this.container.querySelector('.preview');\n    this.textbox = this.container.querySelector('.input');\n    dom(this.container).addClass('image-tooltip-container');\n    this.initListeners();\n  }\n\n  ImageTooltip.prototype.initListeners = function() {\n    dom(this.container.querySelector('.insert')).on('click', _.bind(this.insertImage, this));\n    dom(this.container.querySelector('.cancel')).on('click', _.bind(this.hide, this));\n    dom(this.textbox).on('input', _.bind(this._preview, this));\n    this.initTextbox(this.textbox, this.insertImage, this.hide);\n    return this.quill.onModuleLoad('toolbar', (function(_this) {\n      return function(toolbar) {\n        return toolbar.initFormat('image', _.bind(_this._onToolbar, _this));\n      };\n    })(this));\n  };\n\n  ImageTooltip.prototype.insertImage = function() {\n    var index, url;\n    url = this._normalizeURL(this.textbox.value);\n    if (this.range == null) {\n      this.range = new Range(0, 0);\n    }\n    if (this.range) {\n      this.preview.innerHTML = '<span>Preview</span>';\n      this.textbox.value = '';\n      index = this.range.end;\n      this.quill.insertEmbed(index, 'image', url, 'user');\n      this.quill.setSelection(index + 1, index + 1);\n    }\n    return this.hide();\n  };\n\n  ImageTooltip.prototype._onToolbar = function(range, value) {\n    if (value) {\n      if (!this.textbox.value) {\n        this.textbox.value = 'http://';\n      }\n      this.show();\n      this.textbox.focus();\n      return _.defer((function(_this) {\n        return function() {\n          return _this.textbox.setSelectionRange(_this.textbox.value.length, _this.textbox.value.length);\n        };\n      })(this));\n    } else {\n      return this.quill.deleteText(range, 'user');\n    }\n  };\n\n  ImageTooltip.prototype._preview = function() {\n    var img;\n    if (!this._matchImageURL(this.textbox.value)) {\n      return;\n    }\n    if (this.preview.firstChild.tagName === 'IMG') {\n      return this.preview.firstChild.setAttribute('src', this.textbox.value);\n    } else {\n      img = this.preview.ownerDocument.createElement('img');\n      img.setAttribute('src', this.textbox.value);\n      return this.preview.replaceChild(img, this.preview.firstChild);\n    }\n  };\n\n  ImageTooltip.prototype._matchImageURL = function(url) {\n    return /^https?:\\/\\/.+\\.(jp?g|gif|png)$/.test(url);\n  };\n\n  ImageTooltip.prototype._normalizeURL = function(url) {\n    if (!/^https?:\\/\\//.test(url)) {\n      url = 'http://' + url;\n    }\n    return url;\n  };\n\n  return ImageTooltip;\n\n})(Tooltip);\n\nQuill.registerModule('image-tooltip', ImageTooltip);\n\nmodule.exports = ImageTooltip;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
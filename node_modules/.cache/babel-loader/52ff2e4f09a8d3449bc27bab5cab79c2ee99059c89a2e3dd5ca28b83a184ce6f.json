{"ast":null,"code":"var Delta, Document, PasteManager, Quill, dom, _;\nQuill = require('../quill');\nDocument = require('../core/document');\n_ = Quill.require('lodash');\ndom = Quill.require('dom');\nDelta = Quill.require('delta');\nPasteManager = function () {\n  function PasteManager(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.container = this.quill.addContainer('paste-container');\n    this.container.setAttribute('contenteditable', true);\n    this.quill.addStyles({\n      '.paste-container': {\n        'left': '-10000px',\n        'position': 'absolute',\n        'top': '50%'\n      }\n    });\n    dom(this.quill.root).on('paste', _.bind(this._paste, this));\n  }\n  PasteManager.prototype._paste = function () {\n    var iframe, iframeScrollY, oldDocLength, range, windowScrollX, windowScrollY;\n    oldDocLength = this.quill.getLength();\n    range = this.quill.getSelection();\n    if (range == null) {\n      return;\n    }\n    this.container.innerHTML = \"\";\n    iframe = dom(this.quill.root).window();\n    iframeScrollY = iframe.scrollY;\n    windowScrollX = window.scrollX;\n    windowScrollY = window.scrollY;\n    this.container.focus();\n    return _.defer(function (_this) {\n      return function () {\n        var delta, doc, lengthAdded, line, lineBottom, offset, _ref;\n        doc = new Document(_this.container, _this.quill.options);\n        delta = doc.toDelta();\n        lengthAdded = delta.length() - 1;\n        delta.compose(new Delta().retain(lengthAdded)[\"delete\"](1));\n        if (range.start > 0) {\n          delta.ops.unshift({\n            retain: range.start\n          });\n        }\n        delta[\"delete\"](range.end - range.start);\n        _this.quill.updateContents(delta, 'user');\n        _this.quill.setSelection(range.start + lengthAdded, range.start + lengthAdded);\n        _ref = _this.quill.editor.doc.findLineAt(range.start + lengthAdded), line = _ref[0], offset = _ref[1];\n        lineBottom = line.node.offsetTop + line.node.offsetHeight;\n        if (lineBottom > iframeScrollY + _this.quill.root.offsetHeight) {\n          iframeScrollY = line.node.offsetTop - _this.quill.root.offsetHeight / 2;\n        }\n        iframe.scrollTo(0, iframeScrollY);\n        return window.scrollTo(windowScrollX, windowScrollY);\n      };\n    }(this));\n  };\n  return PasteManager;\n}();\nQuill.registerModule('paste-manager', PasteManager);\nmodule.exports = PasteManager;","map":{"version":3,"names":["Delta","Document","PasteManager","Quill","dom","_","require","quill","options","container","addContainer","setAttribute","addStyles","root","on","bind","_paste","prototype","iframe","iframeScrollY","oldDocLength","range","windowScrollX","windowScrollY","getLength","getSelection","innerHTML","window","scrollY","scrollX","focus","defer","_this","delta","doc","lengthAdded","line","lineBottom","offset","_ref","toDelta","length","compose","retain","start","ops","unshift","end","updateContents","setSelection","editor","findLineAt","node","offsetTop","offsetHeight","scrollTo","registerModule","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/modules/paste-manager.js"],"sourcesContent":["var Delta, Document, PasteManager, Quill, dom, _;\n\nQuill = require('../quill');\n\nDocument = require('../core/document');\n\n_ = Quill.require('lodash');\n\ndom = Quill.require('dom');\n\nDelta = Quill.require('delta');\n\nPasteManager = (function() {\n  function PasteManager(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.container = this.quill.addContainer('paste-container');\n    this.container.setAttribute('contenteditable', true);\n    this.quill.addStyles({\n      '.paste-container': {\n        'left': '-10000px',\n        'position': 'absolute',\n        'top': '50%'\n      }\n    });\n    dom(this.quill.root).on('paste', _.bind(this._paste, this));\n  }\n\n  PasteManager.prototype._paste = function() {\n    var iframe, iframeScrollY, oldDocLength, range, windowScrollX, windowScrollY;\n    oldDocLength = this.quill.getLength();\n    range = this.quill.getSelection();\n    if (range == null) {\n      return;\n    }\n    this.container.innerHTML = \"\";\n    iframe = dom(this.quill.root).window();\n    iframeScrollY = iframe.scrollY;\n    windowScrollX = window.scrollX;\n    windowScrollY = window.scrollY;\n    this.container.focus();\n    return _.defer((function(_this) {\n      return function() {\n        var delta, doc, lengthAdded, line, lineBottom, offset, _ref;\n        doc = new Document(_this.container, _this.quill.options);\n        delta = doc.toDelta();\n        lengthAdded = delta.length() - 1;\n        delta.compose(new Delta().retain(lengthAdded)[\"delete\"](1));\n        if (range.start > 0) {\n          delta.ops.unshift({\n            retain: range.start\n          });\n        }\n        delta[\"delete\"](range.end - range.start);\n        _this.quill.updateContents(delta, 'user');\n        _this.quill.setSelection(range.start + lengthAdded, range.start + lengthAdded);\n        _ref = _this.quill.editor.doc.findLineAt(range.start + lengthAdded), line = _ref[0], offset = _ref[1];\n        lineBottom = line.node.offsetTop + line.node.offsetHeight;\n        if (lineBottom > iframeScrollY + _this.quill.root.offsetHeight) {\n          iframeScrollY = line.node.offsetTop - _this.quill.root.offsetHeight / 2;\n        }\n        iframe.scrollTo(0, iframeScrollY);\n        return window.scrollTo(windowScrollX, windowScrollY);\n      };\n    })(this));\n  };\n\n  return PasteManager;\n\n})();\n\nQuill.registerModule('paste-manager', PasteManager);\n\nmodule.exports = PasteManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
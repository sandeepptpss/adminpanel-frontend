{"ast":null,"code":"var Leaf, Normalizer, Range, Selection, dom, _;\n_ = require('lodash');\ndom = require('../lib/dom');\nLeaf = require('./leaf');\nNormalizer = require('../lib/normalizer');\nRange = require('../lib/range');\nSelection = function () {\n  function Selection(doc, iframe, emitter) {\n    this.doc = doc;\n    this.iframe = iframe;\n    this.emitter = emitter;\n    this.document = this.doc.root.ownerDocument;\n    this.focus = false;\n    this.range = new Range(0, 0);\n    this.nullDelay = false;\n    this.update('silent');\n  }\n  Selection.prototype.checkFocus = function () {\n    return this.document.activeElement === this.doc.root && document.activeElement === this.iframe;\n  };\n  Selection.prototype.getRange = function (ignoreFocus) {\n    var end, nativeRange, start;\n    if (ignoreFocus == null) {\n      ignoreFocus = false;\n    }\n    if (this.checkFocus()) {\n      nativeRange = this._getNativeRange();\n      if (nativeRange == null) {\n        return null;\n      }\n      start = this._positionToIndex(nativeRange.startContainer, nativeRange.startOffset);\n      if (nativeRange.startContainer === nativeRange.endContainer && nativeRange.startOffset === nativeRange.endOffset) {\n        end = start;\n      } else {\n        end = this._positionToIndex(nativeRange.endContainer, nativeRange.endOffset);\n      }\n      return new Range(Math.min(start, end), Math.max(start, end));\n    } else if (ignoreFocus) {\n      return this.range;\n    } else {\n      return null;\n    }\n  };\n  Selection.prototype.preserve = function (fn) {\n    var endNode, endOffset, nativeRange, startNode, startOffset, _ref, _ref1, _ref2, _ref3;\n    nativeRange = this._getNativeRange();\n    if (nativeRange != null && this.checkFocus()) {\n      _ref = this._encodePosition(nativeRange.startContainer, nativeRange.startOffset), startNode = _ref[0], startOffset = _ref[1];\n      _ref1 = this._encodePosition(nativeRange.endContainer, nativeRange.endOffset), endNode = _ref1[0], endOffset = _ref1[1];\n      fn();\n      _ref2 = this._decodePosition(startNode, startOffset), startNode = _ref2[0], startOffset = _ref2[1];\n      _ref3 = this._decodePosition(endNode, endOffset), endNode = _ref3[0], endOffset = _ref3[1];\n      return this._setNativeRange(startNode, startOffset, endNode, endOffset);\n    } else {\n      return fn();\n    }\n  };\n  Selection.prototype.setRange = function (range, source) {\n    var endNode, endOffset, startNode, startOffset, _ref, _ref1, _ref2;\n    if (range != null) {\n      _ref = this._indexToPosition(range.start), startNode = _ref[0], startOffset = _ref[1];\n      if (range.isCollapsed()) {\n        _ref1 = [startNode, startOffset], endNode = _ref1[0], endOffset = _ref1[1];\n      } else {\n        _ref2 = this._indexToPosition(range.end), endNode = _ref2[0], endOffset = _ref2[1];\n      }\n      this._setNativeRange(startNode, startOffset, endNode, endOffset);\n    } else {\n      this._setNativeRange(null);\n    }\n    return this.update(source);\n  };\n  Selection.prototype.shiftAfter = function (index, length, fn) {\n    var range;\n    range = this.getRange();\n    fn();\n    if (range != null) {\n      range.shift(index, length);\n      return this.setRange(range, 'silent');\n    }\n  };\n  Selection.prototype.update = function (source) {\n    var emit, focus, range, toEmit;\n    focus = this.checkFocus();\n    range = this.getRange(true);\n    emit = source !== 'silent' && (!Range.compare(range, this.range) || focus !== this.focus);\n    toEmit = focus ? range : null;\n    if (toEmit === null && source === 'user' && !this.nullDelay) {\n      return this.nullDelay = true;\n    } else {\n      this.nullDelay = false;\n      this.range = range;\n      this.focus = focus;\n      if (emit) {\n        return this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE, toEmit, source);\n      }\n    }\n  };\n  Selection.prototype._decodePosition = function (node, offset) {\n    var childIndex;\n    if (dom(node).isElement()) {\n      childIndex = _.indexOf(dom(node.parentNode).childNodes(), node);\n      offset += childIndex;\n      node = node.parentNode;\n    }\n    return [node, offset];\n  };\n  Selection.prototype._encodePosition = function (node, offset) {\n    var text;\n    while (true) {\n      if (dom(node).isTextNode() || node.tagName === dom.DEFAULT_BREAK_TAG || dom.EMBED_TAGS[node.tagName] != null) {\n        return [node, offset];\n      } else if (offset < node.childNodes.length) {\n        node = node.childNodes[offset];\n        offset = 0;\n      } else if (node.childNodes.length === 0) {\n        if (Normalizer.TAGS[node.tagName] == null) {\n          text = node.ownerDocument.createTextNode('');\n          node.appendChild(text);\n          node = text;\n        }\n        return [node, 0];\n      } else {\n        node = node.lastChild;\n        if (dom(node).isElement()) {\n          if (node.tagName === dom.DEFAULT_BREAK_TAG || dom.EMBED_TAGS[node.tagName] != null) {\n            return [node, 1];\n          } else {\n            offset = node.childNodes.length;\n          }\n        } else {\n          return [node, dom(node).length()];\n        }\n      }\n    }\n  };\n  Selection.prototype._getNativeRange = function () {\n    var range, selection;\n    selection = this.document.getSelection();\n    if ((selection != null ? selection.rangeCount : void 0) > 0) {\n      range = selection.getRangeAt(0);\n      if (dom(range.startContainer).isAncestor(this.doc.root, true)) {\n        if (range.startContainer === range.endContainer || dom(range.endContainer).isAncestor(this.doc.root, true)) {\n          return range;\n        }\n      }\n    }\n    return null;\n  };\n  Selection.prototype._indexToPosition = function (index) {\n    var leaf, offset, _ref;\n    if (this.doc.lines.length === 0) {\n      return [this.doc.root, 0];\n    }\n    _ref = this.doc.findLeafAt(index, true), leaf = _ref[0], offset = _ref[1];\n    return this._decodePosition(leaf.node, offset);\n  };\n  Selection.prototype._positionToIndex = function (node, offset) {\n    var leaf, leafNode, leafOffset, line, lineOffset, _ref;\n    _ref = this._encodePosition(node, offset), leafNode = _ref[0], offset = _ref[1];\n    line = this.doc.findLine(leafNode);\n    if (line == null) {\n      return 0;\n    }\n    leaf = line.findLeaf(leafNode);\n    lineOffset = 0;\n    while (line.prev != null) {\n      line = line.prev;\n      lineOffset += line.length;\n    }\n    if (leaf == null) {\n      return lineOffset;\n    }\n    leafOffset = 0;\n    while (leaf.prev != null) {\n      leaf = leaf.prev;\n      leafOffset += leaf.length;\n    }\n    return lineOffset + leafOffset + offset;\n  };\n  Selection.prototype._setNativeRange = function (startNode, startOffset, endNode, endOffset) {\n    var nativeRange, selection;\n    selection = this.document.getSelection();\n    if (!selection) {\n      return;\n    }\n    if (startNode != null) {\n      if (!this.checkFocus()) {\n        this.doc.root.focus();\n      }\n      nativeRange = this._getNativeRange();\n      if (nativeRange == null || startNode !== nativeRange.startContainer || startOffset !== nativeRange.startOffset || endNode !== nativeRange.endContainer || endOffset !== nativeRange.endOffset) {\n        selection.removeAllRanges();\n        nativeRange = this.document.createRange();\n        nativeRange.setStart(startNode, startOffset);\n        nativeRange.setEnd(endNode, endOffset);\n        selection.addRange(nativeRange);\n        if (!this.checkFocus()) {\n          return this.doc.root.focus();\n        }\n      }\n    } else {\n      selection.removeAllRanges();\n      return this.doc.root.blur();\n    }\n  };\n  return Selection;\n}();\nmodule.exports = Selection;","map":{"version":3,"names":["Leaf","Normalizer","Range","Selection","dom","_","require","doc","iframe","emitter","document","root","ownerDocument","focus","range","nullDelay","update","prototype","checkFocus","activeElement","getRange","ignoreFocus","end","nativeRange","start","_getNativeRange","_positionToIndex","startContainer","startOffset","endContainer","endOffset","Math","min","max","preserve","fn","endNode","startNode","_ref","_ref1","_ref2","_ref3","_encodePosition","_decodePosition","_setNativeRange","setRange","source","_indexToPosition","isCollapsed","shiftAfter","index","length","shift","emit","toEmit","compare","constructor","events","SELECTION_CHANGE","node","offset","childIndex","isElement","indexOf","parentNode","childNodes","text","isTextNode","tagName","DEFAULT_BREAK_TAG","EMBED_TAGS","TAGS","createTextNode","appendChild","lastChild","selection","getSelection","rangeCount","getRangeAt","isAncestor","leaf","lines","findLeafAt","leafNode","leafOffset","line","lineOffset","findLine","findLeaf","prev","removeAllRanges","createRange","setStart","setEnd","addRange","blur","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/core/selection.js"],"sourcesContent":["var Leaf, Normalizer, Range, Selection, dom, _;\n\n_ = require('lodash');\n\ndom = require('../lib/dom');\n\nLeaf = require('./leaf');\n\nNormalizer = require('../lib/normalizer');\n\nRange = require('../lib/range');\n\nSelection = (function() {\n  function Selection(doc, iframe, emitter) {\n    this.doc = doc;\n    this.iframe = iframe;\n    this.emitter = emitter;\n    this.document = this.doc.root.ownerDocument;\n    this.focus = false;\n    this.range = new Range(0, 0);\n    this.nullDelay = false;\n    this.update('silent');\n  }\n\n  Selection.prototype.checkFocus = function() {\n    return this.document.activeElement === this.doc.root && document.activeElement === this.iframe;\n  };\n\n  Selection.prototype.getRange = function(ignoreFocus) {\n    var end, nativeRange, start;\n    if (ignoreFocus == null) {\n      ignoreFocus = false;\n    }\n    if (this.checkFocus()) {\n      nativeRange = this._getNativeRange();\n      if (nativeRange == null) {\n        return null;\n      }\n      start = this._positionToIndex(nativeRange.startContainer, nativeRange.startOffset);\n      if (nativeRange.startContainer === nativeRange.endContainer && nativeRange.startOffset === nativeRange.endOffset) {\n        end = start;\n      } else {\n        end = this._positionToIndex(nativeRange.endContainer, nativeRange.endOffset);\n      }\n      return new Range(Math.min(start, end), Math.max(start, end));\n    } else if (ignoreFocus) {\n      return this.range;\n    } else {\n      return null;\n    }\n  };\n\n  Selection.prototype.preserve = function(fn) {\n    var endNode, endOffset, nativeRange, startNode, startOffset, _ref, _ref1, _ref2, _ref3;\n    nativeRange = this._getNativeRange();\n    if ((nativeRange != null) && this.checkFocus()) {\n      _ref = this._encodePosition(nativeRange.startContainer, nativeRange.startOffset), startNode = _ref[0], startOffset = _ref[1];\n      _ref1 = this._encodePosition(nativeRange.endContainer, nativeRange.endOffset), endNode = _ref1[0], endOffset = _ref1[1];\n      fn();\n      _ref2 = this._decodePosition(startNode, startOffset), startNode = _ref2[0], startOffset = _ref2[1];\n      _ref3 = this._decodePosition(endNode, endOffset), endNode = _ref3[0], endOffset = _ref3[1];\n      return this._setNativeRange(startNode, startOffset, endNode, endOffset);\n    } else {\n      return fn();\n    }\n  };\n\n  Selection.prototype.setRange = function(range, source) {\n    var endNode, endOffset, startNode, startOffset, _ref, _ref1, _ref2;\n    if (range != null) {\n      _ref = this._indexToPosition(range.start), startNode = _ref[0], startOffset = _ref[1];\n      if (range.isCollapsed()) {\n        _ref1 = [startNode, startOffset], endNode = _ref1[0], endOffset = _ref1[1];\n      } else {\n        _ref2 = this._indexToPosition(range.end), endNode = _ref2[0], endOffset = _ref2[1];\n      }\n      this._setNativeRange(startNode, startOffset, endNode, endOffset);\n    } else {\n      this._setNativeRange(null);\n    }\n    return this.update(source);\n  };\n\n  Selection.prototype.shiftAfter = function(index, length, fn) {\n    var range;\n    range = this.getRange();\n    fn();\n    if (range != null) {\n      range.shift(index, length);\n      return this.setRange(range, 'silent');\n    }\n  };\n\n  Selection.prototype.update = function(source) {\n    var emit, focus, range, toEmit;\n    focus = this.checkFocus();\n    range = this.getRange(true);\n    emit = source !== 'silent' && (!Range.compare(range, this.range) || focus !== this.focus);\n    toEmit = focus ? range : null;\n    if (toEmit === null && source === 'user' && !this.nullDelay) {\n      return this.nullDelay = true;\n    } else {\n      this.nullDelay = false;\n      this.range = range;\n      this.focus = focus;\n      if (emit) {\n        return this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE, toEmit, source);\n      }\n    }\n  };\n\n  Selection.prototype._decodePosition = function(node, offset) {\n    var childIndex;\n    if (dom(node).isElement()) {\n      childIndex = _.indexOf(dom(node.parentNode).childNodes(), node);\n      offset += childIndex;\n      node = node.parentNode;\n    }\n    return [node, offset];\n  };\n\n  Selection.prototype._encodePosition = function(node, offset) {\n    var text;\n    while (true) {\n      if (dom(node).isTextNode() || node.tagName === dom.DEFAULT_BREAK_TAG || (dom.EMBED_TAGS[node.tagName] != null)) {\n        return [node, offset];\n      } else if (offset < node.childNodes.length) {\n        node = node.childNodes[offset];\n        offset = 0;\n      } else if (node.childNodes.length === 0) {\n        if (Normalizer.TAGS[node.tagName] == null) {\n          text = node.ownerDocument.createTextNode('');\n          node.appendChild(text);\n          node = text;\n        }\n        return [node, 0];\n      } else {\n        node = node.lastChild;\n        if (dom(node).isElement()) {\n          if (node.tagName === dom.DEFAULT_BREAK_TAG || (dom.EMBED_TAGS[node.tagName] != null)) {\n            return [node, 1];\n          } else {\n            offset = node.childNodes.length;\n          }\n        } else {\n          return [node, dom(node).length()];\n        }\n      }\n    }\n  };\n\n  Selection.prototype._getNativeRange = function() {\n    var range, selection;\n    selection = this.document.getSelection();\n    if ((selection != null ? selection.rangeCount : void 0) > 0) {\n      range = selection.getRangeAt(0);\n      if (dom(range.startContainer).isAncestor(this.doc.root, true)) {\n        if (range.startContainer === range.endContainer || dom(range.endContainer).isAncestor(this.doc.root, true)) {\n          return range;\n        }\n      }\n    }\n    return null;\n  };\n\n  Selection.prototype._indexToPosition = function(index) {\n    var leaf, offset, _ref;\n    if (this.doc.lines.length === 0) {\n      return [this.doc.root, 0];\n    }\n    _ref = this.doc.findLeafAt(index, true), leaf = _ref[0], offset = _ref[1];\n    return this._decodePosition(leaf.node, offset);\n  };\n\n  Selection.prototype._positionToIndex = function(node, offset) {\n    var leaf, leafNode, leafOffset, line, lineOffset, _ref;\n    _ref = this._encodePosition(node, offset), leafNode = _ref[0], offset = _ref[1];\n    line = this.doc.findLine(leafNode);\n    if (line == null) {\n      return 0;\n    }\n    leaf = line.findLeaf(leafNode);\n    lineOffset = 0;\n    while (line.prev != null) {\n      line = line.prev;\n      lineOffset += line.length;\n    }\n    if (leaf == null) {\n      return lineOffset;\n    }\n    leafOffset = 0;\n    while (leaf.prev != null) {\n      leaf = leaf.prev;\n      leafOffset += leaf.length;\n    }\n    return lineOffset + leafOffset + offset;\n  };\n\n  Selection.prototype._setNativeRange = function(startNode, startOffset, endNode, endOffset) {\n    var nativeRange, selection;\n    selection = this.document.getSelection();\n    if (!selection) {\n      return;\n    }\n    if (startNode != null) {\n      if (!this.checkFocus()) {\n        this.doc.root.focus();\n      }\n      nativeRange = this._getNativeRange();\n      if ((nativeRange == null) || startNode !== nativeRange.startContainer || startOffset !== nativeRange.startOffset || endNode !== nativeRange.endContainer || endOffset !== nativeRange.endOffset) {\n        selection.removeAllRanges();\n        nativeRange = this.document.createRange();\n        nativeRange.setStart(startNode, startOffset);\n        nativeRange.setEnd(endNode, endOffset);\n        selection.addRange(nativeRange);\n        if (!this.checkFocus()) {\n          return this.doc.root.focus();\n        }\n      }\n    } else {\n      selection.removeAllRanges();\n      return this.doc.root.blur();\n    }\n  };\n\n  return Selection;\n\n})();\n\nmodule.exports = Selection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"var Delta, Keyboard, Quill, dom, _;\nQuill = require('../quill');\n_ = Quill.require('lodash');\ndom = Quill.require('dom');\nDelta = Quill.require('delta');\nKeyboard = function () {\n  Keyboard.hotkeys = {\n    BOLD: {\n      key: 'B',\n      metaKey: true\n    },\n    INDENT: {\n      key: dom.KEYS.TAB\n    },\n    ITALIC: {\n      key: 'I',\n      metaKey: true\n    },\n    OUTDENT: {\n      key: dom.KEYS.TAB,\n      shiftKey: true\n    },\n    UNDERLINE: {\n      key: 'U',\n      metaKey: true\n    }\n  };\n  function Keyboard(quill, options) {\n    this.quill = quill;\n    this.hotkeys = {};\n    this._initListeners();\n    this._initHotkeys();\n    this._initDeletes();\n  }\n  Keyboard.prototype.addHotkey = function (hotkeys, callback) {\n    if (!_.isArray(hotkeys)) {\n      hotkeys = [hotkeys];\n    }\n    return _.each(hotkeys, function (_this) {\n      return function (hotkey) {\n        var which, _base;\n        hotkey = _.isObject(hotkey) ? _.clone(hotkey) : {\n          key: hotkey\n        };\n        hotkey.callback = callback;\n        which = _.isNumber(hotkey.key) ? hotkey.key : hotkey.key.toUpperCase().charCodeAt(0);\n        if ((_base = _this.hotkeys)[which] == null) {\n          _base[which] = [];\n        }\n        return _this.hotkeys[which].push(hotkey);\n      };\n    }(this));\n  };\n  Keyboard.prototype.toggleFormat = function (range, format) {\n    var delta, toolbar, value;\n    if (range.isCollapsed()) {\n      delta = this.quill.getContents(Math.max(0, range.start - 1), range.end);\n    } else {\n      delta = this.quill.getContents(range);\n    }\n    value = delta.ops.length === 0 || !_.all(delta.ops, function (op) {\n      var _ref;\n      return (_ref = op.attributes) != null ? _ref[format] : void 0;\n    });\n    if (range.isCollapsed()) {\n      this.quill.prepareFormat(format, value);\n    } else {\n      this.quill.formatText(range, format, value, 'user');\n    }\n    toolbar = this.quill.getModule('toolbar');\n    if (toolbar != null) {\n      return toolbar.setActive(format, value);\n    }\n  };\n  Keyboard.prototype._initDeletes = function () {\n    return this.addHotkey([dom.KEYS.DELETE, dom.KEYS.BACKSPACE], function (_this) {\n      return function () {\n        return _this.quill.getLength() > 1;\n      };\n    }(this));\n  };\n  Keyboard.prototype._initHotkeys = function () {\n    this.addHotkey(Keyboard.hotkeys.INDENT, function (_this) {\n      return function (range) {\n        _this._onTab(range, false);\n        return false;\n      };\n    }(this));\n    this.addHotkey(Keyboard.hotkeys.OUTDENT, function (_this) {\n      return function (range) {\n        return false;\n      };\n    }(this));\n    return _.each(['bold', 'italic', 'underline'], function (_this) {\n      return function (format) {\n        return _this.addHotkey(Keyboard.hotkeys[format.toUpperCase()], function (range) {\n          _this.toggleFormat(range, format);\n          return false;\n        });\n      };\n    }(this));\n  };\n  Keyboard.prototype._initListeners = function () {\n    return dom(this.quill.root).on('keydown', function (_this) {\n      return function (event) {\n        var prevent;\n        prevent = false;\n        _.each(_this.hotkeys[event.which], function (hotkey) {\n          var metaKey;\n          metaKey = dom.isMac() ? event.metaKey : event.metaKey || event.ctrlKey;\n          if (!!hotkey.metaKey !== !!metaKey) {\n            return;\n          }\n          if (!!hotkey.shiftKey !== !!event.shiftKey) {\n            return;\n          }\n          if (!!hotkey.altKey !== !!event.altKey) {\n            return;\n          }\n          prevent = hotkey.callback(_this.quill.getSelection()) === false || prevent;\n          return true;\n        });\n        return !prevent;\n      };\n    }(this));\n  };\n  Keyboard.prototype._onTab = function (range, shift) {\n    var delta;\n    if (shift == null) {\n      shift = false;\n    }\n    delta = new Delta().retain(range.start).insert(\"\\t\")[\"delete\"](range.end - range.start).retain(this.quill.getLength() - range.end);\n    this.quill.updateContents(delta);\n    return this.quill.setSelection(range.start + 1, range.start + 1);\n  };\n  return Keyboard;\n}();\nQuill.registerModule('keyboard', Keyboard);\nmodule.exports = Keyboard;","map":{"version":3,"names":["Delta","Keyboard","Quill","dom","_","require","hotkeys","BOLD","key","metaKey","INDENT","KEYS","TAB","ITALIC","OUTDENT","shiftKey","UNDERLINE","quill","options","_initListeners","_initHotkeys","_initDeletes","prototype","addHotkey","callback","isArray","each","_this","hotkey","which","_base","isObject","clone","isNumber","toUpperCase","charCodeAt","push","toggleFormat","range","format","delta","toolbar","value","isCollapsed","getContents","Math","max","start","end","ops","length","all","op","_ref","attributes","prepareFormat","formatText","getModule","setActive","DELETE","BACKSPACE","getLength","_onTab","root","on","event","prevent","isMac","ctrlKey","altKey","getSelection","shift","retain","insert","updateContents","setSelection","registerModule","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/modules/keyboard.js"],"sourcesContent":["var Delta, Keyboard, Quill, dom, _;\n\nQuill = require('../quill');\n\n_ = Quill.require('lodash');\n\ndom = Quill.require('dom');\n\nDelta = Quill.require('delta');\n\nKeyboard = (function() {\n  Keyboard.hotkeys = {\n    BOLD: {\n      key: 'B',\n      metaKey: true\n    },\n    INDENT: {\n      key: dom.KEYS.TAB\n    },\n    ITALIC: {\n      key: 'I',\n      metaKey: true\n    },\n    OUTDENT: {\n      key: dom.KEYS.TAB,\n      shiftKey: true\n    },\n    UNDERLINE: {\n      key: 'U',\n      metaKey: true\n    }\n  };\n\n  function Keyboard(quill, options) {\n    this.quill = quill;\n    this.hotkeys = {};\n    this._initListeners();\n    this._initHotkeys();\n    this._initDeletes();\n  }\n\n  Keyboard.prototype.addHotkey = function(hotkeys, callback) {\n    if (!_.isArray(hotkeys)) {\n      hotkeys = [hotkeys];\n    }\n    return _.each(hotkeys, (function(_this) {\n      return function(hotkey) {\n        var which, _base;\n        hotkey = _.isObject(hotkey) ? _.clone(hotkey) : {\n          key: hotkey\n        };\n        hotkey.callback = callback;\n        which = _.isNumber(hotkey.key) ? hotkey.key : hotkey.key.toUpperCase().charCodeAt(0);\n        if ((_base = _this.hotkeys)[which] == null) {\n          _base[which] = [];\n        }\n        return _this.hotkeys[which].push(hotkey);\n      };\n    })(this));\n  };\n\n  Keyboard.prototype.toggleFormat = function(range, format) {\n    var delta, toolbar, value;\n    if (range.isCollapsed()) {\n      delta = this.quill.getContents(Math.max(0, range.start - 1), range.end);\n    } else {\n      delta = this.quill.getContents(range);\n    }\n    value = delta.ops.length === 0 || !_.all(delta.ops, function(op) {\n      var _ref;\n      return (_ref = op.attributes) != null ? _ref[format] : void 0;\n    });\n    if (range.isCollapsed()) {\n      this.quill.prepareFormat(format, value);\n    } else {\n      this.quill.formatText(range, format, value, 'user');\n    }\n    toolbar = this.quill.getModule('toolbar');\n    if (toolbar != null) {\n      return toolbar.setActive(format, value);\n    }\n  };\n\n  Keyboard.prototype._initDeletes = function() {\n    return this.addHotkey([dom.KEYS.DELETE, dom.KEYS.BACKSPACE], (function(_this) {\n      return function() {\n        return _this.quill.getLength() > 1;\n      };\n    })(this));\n  };\n\n  Keyboard.prototype._initHotkeys = function() {\n    this.addHotkey(Keyboard.hotkeys.INDENT, (function(_this) {\n      return function(range) {\n        _this._onTab(range, false);\n        return false;\n      };\n    })(this));\n    this.addHotkey(Keyboard.hotkeys.OUTDENT, (function(_this) {\n      return function(range) {\n        return false;\n      };\n    })(this));\n    return _.each(['bold', 'italic', 'underline'], (function(_this) {\n      return function(format) {\n        return _this.addHotkey(Keyboard.hotkeys[format.toUpperCase()], function(range) {\n          _this.toggleFormat(range, format);\n          return false;\n        });\n      };\n    })(this));\n  };\n\n  Keyboard.prototype._initListeners = function() {\n    return dom(this.quill.root).on('keydown', (function(_this) {\n      return function(event) {\n        var prevent;\n        prevent = false;\n        _.each(_this.hotkeys[event.which], function(hotkey) {\n          var metaKey;\n          metaKey = dom.isMac() ? event.metaKey : event.metaKey || event.ctrlKey;\n          if (!!hotkey.metaKey !== !!metaKey) {\n            return;\n          }\n          if (!!hotkey.shiftKey !== !!event.shiftKey) {\n            return;\n          }\n          if (!!hotkey.altKey !== !!event.altKey) {\n            return;\n          }\n          prevent = hotkey.callback(_this.quill.getSelection()) === false || prevent;\n          return true;\n        });\n        return !prevent;\n      };\n    })(this));\n  };\n\n  Keyboard.prototype._onTab = function(range, shift) {\n    var delta;\n    if (shift == null) {\n      shift = false;\n    }\n    delta = new Delta().retain(range.start).insert(\"\\t\")[\"delete\"](range.end - range.start).retain(this.quill.getLength() - range.end);\n    this.quill.updateContents(delta);\n    return this.quill.setSelection(range.start + 1, range.start + 1);\n  };\n\n  return Keyboard;\n\n})();\n\nQuill.registerModule('keyboard', Keyboard);\n\nmodule.exports = Keyboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"var Authorship, Delta, Quill, dom, _;\nQuill = require('../quill');\n_ = Quill.require('lodash');\ndom = Quill.require('dom');\nDelta = Quill.require('delta');\nAuthorship = function () {\n  Authorship.DEFAULTS = {\n    authorId: null,\n    color: 'transparent',\n    enabled: false\n  };\n  function Authorship(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    if (this.options.button != null) {\n      this.attachButton(this.options.button);\n    }\n    if (this.options.enabled) {\n      this.enable();\n    }\n    this.quill.addFormat('author', {\n      \"class\": 'author-'\n    });\n    if (this.options.authorId == null) {\n      return;\n    }\n    this.quill.on(this.quill.constructor.events.PRE_EVENT, function (_this) {\n      return function (eventName, delta, origin) {\n        var authorDelta, authorFormat;\n        if (eventName === _this.quill.constructor.events.TEXT_CHANGE && origin === 'user') {\n          authorDelta = new Delta();\n          authorFormat = {\n            author: _this.options.authorId\n          };\n          _.each(delta.ops, function (op) {\n            if (op[\"delete\"] != null) {\n              return;\n            }\n            if (op.insert != null || op.retain != null && op.attributes != null) {\n              op.attributes || (op.attributes = {});\n              op.attributes.author = _this.options.authorId;\n              return authorDelta.retain(op.retain || op.insert.length || 1, authorFormat);\n            } else {\n              return authorDelta.retain(op.retain);\n            }\n          });\n          return _this.quill.updateContents(authorDelta, Quill.sources.SILENT);\n        }\n      };\n    }(this));\n    this.addAuthor(this.options.authorId, this.options.color);\n  }\n  Authorship.prototype.addAuthor = function (id, color) {\n    var styles;\n    styles = {};\n    styles[\".authorship .author-\" + id] = {\n      \"background-color\": \"\" + color\n    };\n    return this.quill.addStyles(styles);\n  };\n  Authorship.prototype.attachButton = function (button) {\n    var $button;\n    $button = dom(button);\n    return $button.on('click', function (_this) {\n      return function () {\n        $button.toggleClass('ql-on');\n        return _this.enable($dom.hasClass('ql-on'));\n      };\n    }(this));\n  };\n  Authorship.prototype.enable = function (enabled) {\n    if (enabled == null) {\n      enabled = true;\n    }\n    return dom(this.quill.root).toggleClass('authorship', enabled);\n  };\n  Authorship.prototype.disable = function () {\n    return this.enable(false);\n  };\n  return Authorship;\n}();\nQuill.registerModule('authorship', Authorship);\nmodule.exports = Authorship;","map":{"version":3,"names":["Authorship","Delta","Quill","dom","_","require","DEFAULTS","authorId","color","enabled","quill","options","button","attachButton","enable","addFormat","on","constructor","events","PRE_EVENT","_this","eventName","delta","origin","authorDelta","authorFormat","TEXT_CHANGE","author","each","ops","op","insert","retain","attributes","length","updateContents","sources","SILENT","addAuthor","prototype","id","styles","addStyles","$button","toggleClass","$dom","hasClass","root","disable","registerModule","module","exports"],"sources":["/home/tpss/public_html/Mernstack/authtask/frontend/node_modules/quilljs/lib/modules/authorship.js"],"sourcesContent":["var Authorship, Delta, Quill, dom, _;\n\nQuill = require('../quill');\n\n_ = Quill.require('lodash');\n\ndom = Quill.require('dom');\n\nDelta = Quill.require('delta');\n\nAuthorship = (function() {\n  Authorship.DEFAULTS = {\n    authorId: null,\n    color: 'transparent',\n    enabled: false\n  };\n\n  function Authorship(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    if (this.options.button != null) {\n      this.attachButton(this.options.button);\n    }\n    if (this.options.enabled) {\n      this.enable();\n    }\n    this.quill.addFormat('author', {\n      \"class\": 'author-'\n    });\n    if (this.options.authorId == null) {\n      return;\n    }\n    this.quill.on(this.quill.constructor.events.PRE_EVENT, (function(_this) {\n      return function(eventName, delta, origin) {\n        var authorDelta, authorFormat;\n        if (eventName === _this.quill.constructor.events.TEXT_CHANGE && origin === 'user') {\n          authorDelta = new Delta();\n          authorFormat = {\n            author: _this.options.authorId\n          };\n          _.each(delta.ops, function(op) {\n            if (op[\"delete\"] != null) {\n              return;\n            }\n            if ((op.insert != null) || ((op.retain != null) && (op.attributes != null))) {\n              op.attributes || (op.attributes = {});\n              op.attributes.author = _this.options.authorId;\n              return authorDelta.retain(op.retain || op.insert.length || 1, authorFormat);\n            } else {\n              return authorDelta.retain(op.retain);\n            }\n          });\n          return _this.quill.updateContents(authorDelta, Quill.sources.SILENT);\n        }\n      };\n    })(this));\n    this.addAuthor(this.options.authorId, this.options.color);\n  }\n\n  Authorship.prototype.addAuthor = function(id, color) {\n    var styles;\n    styles = {};\n    styles[\".authorship .author-\" + id] = {\n      \"background-color\": \"\" + color\n    };\n    return this.quill.addStyles(styles);\n  };\n\n  Authorship.prototype.attachButton = function(button) {\n    var $button;\n    $button = dom(button);\n    return $button.on('click', (function(_this) {\n      return function() {\n        $button.toggleClass('ql-on');\n        return _this.enable($dom.hasClass('ql-on'));\n      };\n    })(this));\n  };\n\n  Authorship.prototype.enable = function(enabled) {\n    if (enabled == null) {\n      enabled = true;\n    }\n    return dom(this.quill.root).toggleClass('authorship', enabled);\n  };\n\n  Authorship.prototype.disable = function() {\n    return this.enable(false);\n  };\n\n  return Authorship;\n\n})();\n\nQuill.registerModule('authorship', Authorship);\n\nmodule.exports = Authorship;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}